(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{467:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"git-规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-规范"}},[t._v("#")]),t._v(" Git 规范")]),t._v(" "),a("p",[t._v("Git 规范分为 Git Workflow 规范和 Git Commit 规范。")]),t._v(" "),a("h2",{attrs:{id:"git-workflow-规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-workflow-规范"}},[t._v("#")]),t._v(" Git Workflow 规范")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://sebastiankennedy-club-1256190695.cos.ap-guangzhou.myqcloud.com/images/branches.svg",alt:"branches"}})]),t._v(" "),a("p",[t._v("首先，项目至少存在两个长期分支，分别是 main、develop 分支；其次，项目可以存在两种短期分支，分别是 feature、hotfix 分支。在项目不大、团队开发成员小于 5 人的情况下，线上只需维护 main、develop 分支即可，其中 main 分支为保护分支，只做合并和生产环境使用，合并分支时需打上标签且注明版本号与版本功能，develop 用于团队成员的日常开发，feature、hotfix 分支根据实际情况决定是否在线上使用，本地开发可以自由使用，建议根据项目任务卡片编号进行命名。")]),t._v(" "),a("h2",{attrs:{id:"git-commit-规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-commit-规范"}},[t._v("#")]),t._v(" Git Commit 规范")]),t._v(" "),a("h3",{attrs:{id:"公式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#公式"}},[t._v("#")]),t._v(" 公式")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\n<type>(<scope>): <subject> # 标题行\n<BLANK LINE>\n<body>\n<BLANK LINE>\n<footer>\n")])])]),a("p",[t._v("上述公式分为三个部分：")]),t._v(" "),a("ul",[a("li",[t._v("标题行：必填，描述 commit 内容与类型")]),t._v(" "),a("li",[t._v("内容行：选填，具体描述为什么开发、开发了什么、开发的思路")]),t._v(" "),a("li",[t._v("底部行：选择，任务卡片链接、参考文献、注意事项")]),t._v(" "),a("li",[t._v("scope：commit 影响的范围，例如：route，component，utils，build")]),t._v(" "),a("li",[t._v("subject：commit 的概述")])]),t._v(" "),a("h3",{attrs:{id:"类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类型"}},[t._v("#")]),t._v(" 类型")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("表头")]),t._v(" "),a("th",[t._v("表头")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("feat")]),t._v(" "),a("td",[t._v("新功能、新特性")])]),t._v(" "),a("tr",[a("td",[t._v("fix")]),t._v(" "),a("td",[t._v("修复缺陷")])]),t._v(" "),a("tr",[a("td",[t._v("perf")]),t._v(" "),a("td",[t._v("修改代码，以提高性能")])]),t._v(" "),a("tr",[a("td",[t._v("refactor")]),t._v(" "),a("td",[t._v("代码重构（重构，在不影响代码内部行为、功能下的代码修改）")])]),t._v(" "),a("tr",[a("td",[t._v("docs")]),t._v(" "),a("td",[t._v("文档修改")])]),t._v(" "),a("tr",[a("td",[t._v("style")]),t._v(" "),a("td",[t._v("代码格式修改, 注意不是 css 修改（例如分号修改）")])]),t._v(" "),a("tr",[a("td",[t._v("test")]),t._v(" "),a("td",[t._v("测试用例新增、修改")])]),t._v(" "),a("tr",[a("td",[t._v("build")]),t._v(" "),a("td",[t._v("影响项目构建或依赖项修改")])]),t._v(" "),a("tr",[a("td",[t._v("revert")]),t._v(" "),a("td",[t._v("恢复上一次提交")])]),t._v(" "),a("tr",[a("td",[t._v("ci")]),t._v(" "),a("td",[t._v("持续集成相关文件修改")])]),t._v(" "),a("tr",[a("td",[t._v("chore")]),t._v(" "),a("td",[t._v("其他修改（不在上述类型中的修改）")])]),t._v(" "),a("tr",[a("td",[t._v("release")]),t._v(" "),a("td",[t._v("发布新版本")])]),t._v(" "),a("tr",[a("td",[t._v("workflow")]),t._v(" "),a("td",[t._v("工作流相关文件修改")])])])]),t._v(" "),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\nfeat: 后台 - 订单管理\nfeat(order): 接口 - 新增创建订单接口\nfeat(common): #10 前端 - 顶部导航栏组件封装\n")])])]),a("h3",{attrs:{id:"自动化约束"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动化约束"}},[t._v("#")]),t._v(" 自动化约束")]),t._v(" "),a("p",[t._v("因为人类总有懒惰、懈怠、随意、守旧的时候，所以需要工具来对 Git Commit 进行统一的自动化约束。")]),t._v(" "),a("h4",{attrs:{id:"web-前端项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-前端项目"}},[t._v("#")]),t._v(" Web 前端项目")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\nnpm i -D husky\n")])])]),a("p",[t._v("在 "),a("code",[t._v("package.json")]),t._v(" 加上下面代码：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"husky"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hooks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Git Commit 之前执行代码风格检查")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pre-commit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run lint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查 Git Commit ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commit-msg"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node script/verify-commit.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 推送之前运行测试单元")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pre-push"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm test"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("新建文件 "),a("code",[t._v("verify-commit.js")]),t._v(" ，输入下面代码：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" msgPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HUSKY_GIT_PARAMS")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msgPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" commitRE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^(feat|fix|docs|style|refactor|perf|test|workflow|build|ci|chore|release|workflow)(\\(.+\\))?: .{1,50}")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("commitRE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n        不合法的 commit 消息格式。\n        请查看 git commit 提交规范：https://sebastiankennedy.github.io/project-specification/git/\n    ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"web-后端项目-php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-后端项目-php"}},[t._v("#")]),t._v(" Web 后端项目（PHP）")])])}),[],!1,null,null,null);s.default=e.exports}}]);